/*!
 * Tiny Scrollbar 1.65
 * http://www.baijs.nl/tinyscrollbar/
 *
 * Copyright 2010, Maarten Baijs
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/gpl-2.0.php
 *
 * Date: 10 / 05 / 2011
 * Depends on library: jQuery
 * 
 */
(function(a){a.tiny=a.tiny||{};a.tiny.scrollbar={options:{autohide:false,ahInt:2,axis:"y",wheel:40,scroll:true,size:"auto",sizethumb:"auto"}};a.fn.tinyscrollbar=function(c){var c=a.extend({},a.tiny.scrollbar.options,c);this.each(function(){a(this).data("tsb",new b(a(this),c))});return this};a.fn.tinyscrollbar_update=function(c){return a(this).data("tsb").update(c)};function b(u,f){if((navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPod/i))||(navigator.userAgent.match(/iPad/i))){f.autohide=false}var o=f.ahInt;var k=o;var y;var n=0;var l=this;var x=u;var j={obj:a(".viewport",u)};a('<div class="scrollbar"><div class="track"></div><div class="thumb"><div class="end"></div></div></div>').prependTo(u);var g={obj:a(".overview",u)};var d={obj:a(".scrollbar",u)};var p={obj:a(".track",d.obj)};var t={obj:a(".thumb",d.obj)};var m=f.axis=="x",r=m?"left":"top",A=m?"Width":"Height";var v,E={start:0,now:0},s={};function c(){l.update();w();B();return l}this.update=function(F){j[f.axis]=j.obj[0]["offset"+A];g[f.axis]=g.obj[0]["scroll"+A];g.ratio=j[f.axis]/g[f.axis];d.obj.toggleClass("disable",g.ratio>=1);p[f.axis]=f.size=="auto"?j[f.axis]:f.size;t[f.axis]=Math.min(p[f.axis],Math.max(0,(f.sizethumb=="auto"?(p[f.axis]*g.ratio):f.sizethumb)));d.ratio=f.sizethumb=="auto"?(g[f.axis]/p[f.axis]):(g[f.axis]-j[f.axis])/(p[f.axis]-t[f.axis]);v=(F=="relative"&&g.ratio<=1)?Math.min((g[f.axis]-j[f.axis]),Math.max(0,v)):0;v=(F=="bottom"&&g.ratio<=1)?(g[f.axis]-j[f.axis]):isNaN(parseInt(F))?v:parseInt(F);C()};function C(){t.obj.css(r,v/d.ratio);g.obj.css(r,-v);s.start=t.obj.offset()[r];var F=A.toLowerCase();d.obj.css(F,p[f.axis]);p.obj.css(F,p[f.axis]);t.obj.css(F,t[f.axis])}function w(){t.obj.bind("mousedown",i);t.obj[0].ontouchstart=function(F){F.preventDefault();t.obj.unbind("mousedown");i(F.touches[0]);return false};p.obj.bind("mouseup",z);if(f.scroll&&this.addEventListener){x[0].addEventListener("DOMMouseScroll",D,false);x[0].addEventListener("mousewheel",D,false)}else{if(f.scroll){x[0].onmousewheel=D}}}function i(G){s.start=m?G.pageX:G.pageY;var F=parseInt(t.obj.css(r));E.start=F=="auto"?0:F;a(document).bind("mousemove",z);document.ontouchmove=function(H){a(document).unbind("mousemove");z(H.touches[0])};a(document).bind("mouseup",e);t.obj.bind("mouseup",e);t.obj[0].ontouchend=document.ontouchend=function(H){a(document).unbind("mouseup");t.obj.unbind("mouseup");e(H.touches[0])};return false}function D(G){B();if(!(g.ratio>=1)){var F=G.wheelDelta?G.wheelDelta/120:-G.detail/3;v-=F*f.wheel;v=Math.min((g[f.axis]-j[f.axis]),Math.max(0,v));t.obj.css(r,v/d.ratio);g.obj.css(r,-v);G.preventDefault()}}function e(F){a(document).unbind("mousemove",z);a(document).unbind("mouseup",e);t.obj.unbind("mouseup",e);document.ontouchmove=t.obj[0].ontouchend=document.ontouchend=null;return false}function z(F){B();if(!(g.ratio>=1)){E.now=Math.min((p[f.axis]-t[f.axis]),Math.max(0,(E.start+((m?F.pageX:F.pageY)-s.start))));v=E.now*d.ratio;g.obj.css(r,-v);t.obj.css(r,E.now)}return false}function q(){k=k-1;if(k>=0){y=setTimeout(q,1000)}else{h()}return false}function B(){var F=d.obj.hasClass("disable");if(!F){if(f.autohide==true){if(!n&&k>=0){n=1;a(t.obj).stop(true,true).fadeIn();q();a(p.obj).mouseover(function(G){if(a(t.obj).is(":visible")==true){a(p.obj).css({"background-color":"#B0BAB0"})}})}else{k=o}}else{a(p.obj).css({"background-color":"#B0BAB0"})}}return false}function h(){clearTimeout(y);n=0;a(t.obj).stop(true,true).fadeOut();a(p.obj).css({"background-color":"#FFFFFF"});return false}return c()}})(jQuery);