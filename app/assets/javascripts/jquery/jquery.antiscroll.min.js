(function(d){d.fn.antiscroll=function(g){return this.each(function(){if(d(this).data("antiscroll")){d(this).data("antiscroll").destroy()}d(this).data("antiscroll",new d.Antiscroll(this,g))})};d.Antiscroll=a;function a(g,h){this.el=d(g);this.options=h||{};this.padding=undefined==this.options.padding?2:this.options.padding;this.inner=this.el.find(".antiscroll-inner");this.inner.css({width:"+="+c(),height:"+="+c()});if(this.inner.get(0).scrollWidth>this.el.width()){this.horizontal=new f.Horizontal(this)}if(this.inner.get(0).scrollHeight>this.el.height()){this.vertical=new f.Vertical(this)}}a.prototype.destroy=function(){if(this.horizontal){this.horizontal.destroy()}if(this.vertical){this.vertical.destroy()}return this};function f(h){this.pane=h;this.pane.el.append(this.el);this.innerEl=this.pane.inner.get(0);this.dragging=false;this.enter=false;this.shown=false;this.pane.el.mouseenter(d.proxy(this,"mouseenter"));this.pane.el.mouseleave(d.proxy(this,"mouseleave"));this.el.mousedown(d.proxy(this,"mousedown"));this.pane.inner.scroll(d.proxy(this,"scroll"));this.pane.inner.bind("mousewheel",d.proxy(this,"mousewheel"));var g=this.pane.options.initialDisplay;if(g!==false){this.show();this.hiding=setTimeout(d.proxy(this,"hide"),parseInt(g,10)||3000)}}f.prototype.destroy=function(){this.el.remove();return this};f.prototype.mouseenter=function(){this.enter=true;this.show()};f.prototype.mouseleave=function(){this.enter=false;if(!this.dragging){this.hide()}};f.prototype.scroll=function(){if(!this.shown){this.show();if(!this.enter&&!this.dragging){this.hiding=setTimeout(d.proxy(this,"hide"),1500)}}this.update()};f.prototype.mousedown=function(i){i.preventDefault();this.dragging=true;this.startPageY=i.pageY-parseInt(this.el.css("top"),10);this.startPageX=i.pageX-parseInt(this.el.css("left"),10);document.onselectstart=function(){return false};var j=this.pane,g=d.proxy(this,"mousemove"),h=this;d(document).mousemove(g).mouseup(function(){h.dragging=false;document.onselectstart=null;d(document).unbind("mousemove",g);if(!h.enter){h.hide()}})};f.prototype.show=function(g){if(!this.shown){this.update();this.el.addClass("antiscroll-scrollbar-shown");if(this.hiding){clearTimeout(this.hiding);this.hiding=null}this.shown=true}};f.prototype.hide=function(){if(this.shown){this.el.removeClass("antiscroll-scrollbar-shown");this.shown=false}};f.Horizontal=function(g){this.el=d('<div class="antiscroll-scrollbar antiscroll-scrollbar-horizontal">');f.call(this,g)};e(f.Horizontal,f);f.Horizontal.prototype.update=function(){var g=this.pane.el.width(),h=g-this.pane.padding*2,i=this.pane.inner.get(0);this.el.css("width",h*g/i.scrollWidth).css("left",h*i.scrollLeft/i.scrollWidth)};f.Horizontal.prototype.mousemove=function(i){var g=this.pane.el.width()-this.pane.padding*2,l=i.pageX-this.startPageX,h=this.el.width(),j=this.pane.inner.get(0);var k=Math.min(Math.max(l,0),g-h);j.scrollLeft=(j.scrollWidth-this.pane.el.width())*k/(g-h)};f.Horizontal.prototype.mousewheel=function(h,j,g,i){if((g<0&&0==this.pane.inner.get(0).scrollLeft)||(g>0&&(this.innerEl.scrollLeft+this.pane.el.width()==this.innerEl.scrollWidth))){h.preventDefault();return false}};f.Vertical=function(g){this.el=d('<div class="antiscroll-scrollbar antiscroll-scrollbar-vertical">');f.call(this,g)};e(f.Vertical,f);f.Vertical.prototype.update=function(){var g=this.pane.el.height(),h=g-this.pane.padding*2,i=this.innerEl;this.el.css("height",h*g/i.scrollHeight).css("top",h*i.scrollTop/i.scrollHeight)};f.Vertical.prototype.mousemove=function(i){var g=this.pane.el.height(),h=g-this.pane.padding*2,m=i.pageY-this.startPageY,k=this.el.height(),j=this.innerEl;var l=Math.min(Math.max(m,0),h-k);j.scrollTop=(j.scrollHeight-g)*l/(h-k)};f.Vertical.prototype.mousewheel=function(h,j,g,i){if((i>0&&0==this.innerEl.scrollTop)||(i<0&&(this.innerEl.scrollTop+this.pane.el.height()==this.innerEl.scrollHeight))){h.preventDefault();return false}};function e(i,h){function g(){}g.prototype=h.prototype;i.prototype=new g}var b;function c(){if(!b){var i=d('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');d("body").append(i);var h=d("div",i).innerWidth();i.css("overflow-y","scroll");var g=d("div",i).innerWidth();d(i).remove();b=h-g}return b}})(jQuery);